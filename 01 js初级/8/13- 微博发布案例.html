<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>微博发布案例</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }
    ul {
      list-style:none;
    }
    .box {
      width: 600px;
      margin: 100px auto;
      border: 1px solid #000;
      padding: 20px;
    }
    textarea {
      width: 450px;
      height: 160px;
      outline:none; /*去掉环绕线*/
      resize: none; /*禁用拖动*/
    }
    ul {
      width: 450px;
      padding-left: 80px;
    }
    ul li {
      /*line-height: 25px;*/
      height: 25px;
      width: 450px;
      /*border: 1px solid #000;*/
      border-bottom: 1px dashed #cccccc;
    }
    input {
      float: right;
    }
  </style>
</head>
<body>
<div class="box" id="weibo">
  <span>微博发布</span>
  <textarea name="" id="txt" cols="30" rows="10"></textarea>
  <button id="btn">发布</button>
  <ul id="ul">
    <!--<li>这是一个动态添的元素内容 <input type="button" value="删除"/></li>-->
  </ul>
</div>

</body>
</html>
<script src="common.js"></script>
<script>
  // 1. 获取要操作的对象
  var box = $$("weibo");
  var txtArea = $$("txt");
  var btn = $$("btn");
  var ul = $$("ul");
  //2. 给事件源注册事件
  btn.onclick = function (){
       var value = txtArea.value;
    // 3. 动态创建li标签
    var li = document.createElement("li");
    Txt.setText(li,value);
    // 4. 创建删除按钮
    var input = document.createElement("input");
    input.type = "button";
    input.value = "删除";
    li.appendChild(input);

    // 5. 判断是插入节点还是追加节点
    var lis = ul.children;
    if(lis.length){
      ul.insertBefore(li,lis[0]);
    }else {
      ul.appendChild(li);//将创建出来的li标签添加到ul中
    }
    //6. 给按钮注册事件
    input.onclick = function (){
           this.parentNode.parentNode.removeChild(this.parentNode);
    }
  }

</script>